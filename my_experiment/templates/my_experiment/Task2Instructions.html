{% extends "global/Page.html" %}
{% load otree static %}

{% block content %}
  <h3 class="text-center text-primary fw-semibold mb-4">
    {% if player.selected_language == 'it' %}
      Compito 2: Scelte intertemporali
    {% else %}
      Task 2: Intertemporal choice
    {% endif %}
  </h3>
  <hr>

  <p class="fs-5">
    {% if player.selected_language == 'it' %}
      Nel secondo compito, ti verrà chiesto di completare <strong>5 decisioni</strong>.
      Per ciascuna decisione (dalla 1 alla 5), ti verrà chiesto di allocare tra due date una somma di denaro da ricevere:
    {% else %}
      For the second task, you will be faced with <strong>5 decisions</strong>.
      For each decision (1 through 5), you are asked to allocate a sum of money to be given to you between two dates:
    {% endif %}
  </p>

  <ul class="fs-5">
    <li>
      {% if player.selected_language == 'it' %}
        <strong>Immediatamente</strong>
      {% else %}
        <strong>Right now</strong>
      {% endif %}
    </li>
    <li>
      {% if player.selected_language == 'it' %}
        <strong>Tra 4 settimane</strong>
      {% else %}
        <strong>In 4 weeks</strong>
      {% endif %}
    </li>
  </ul>

  <p class="fs-5">
    {% if player.selected_language == 'it' %}
      Per ogni decisione, hai a disposizione <strong>€ 1.000</strong> da dividere come preferisci.
    {% else %}
      For each decision, you have <strong>€ 1.000</strong> that you can split between the two dates however you like.
    {% endif %}
  </p>
<div class="alert alert-primary rounded">
  <h5>
    {% if player.selected_language == 'it' %}
      Tasso d'interesse
    {% else %}
      Interest Rate
    {% endif %}
  </h5>

  <ul class="fs-5">
    <li>
      {% if player.selected_language == 'it' %}
        Ogni Euro che vuoi ricevere <strong>oggi</strong> vale 1.
        <br>
        <em>Esempio:</em> Se scegli di ricevere 10 Euro immediatamente, otterrai 10 Euro.
      {% else %}
        Each Euro that you choose to receive <strong>right now</strong> is worth 1.
        <br>
        <em>Example:</em> If you decide to receive 10 Euros right now, you receive 10 Euros.
      {% endif %}
    </li>
    <li>
      {% if player.selected_language == 'it' %}
        Ogni Euro che vuoi ricevere <strong>tra 4 settimane</strong> vale più di 1.
        <br>
        <em>Esempio:</em> Se il tasso è 1.5 e vuoi ricevere 10 Euro in futuro, tra 4 settimane riceverai 10 × 1.5 = <strong>15 Euro</strong>.
      {% else %}
        Each Euro that you want to receive <strong>4 weeks from now</strong> is worth more than 1.
        <br>
        <em>Example:</em> If the rate is 1.5 and you want to receive 10 Euros in the future, in 4 weeks you will receive 10 × 1.5 = <strong>15 Euros</strong>.
      {% endif %}
    </li>
  </ul>
</div>
  <p class="fs-5">

  <p class="fs-5 text-danger">
    {% if player.selected_language == 'it' %}
      <strong>Importante:</strong> Devi completare <em>tutte</em> e 5 le decisioni prima di poter procedere.
    {% else %}
      <strong>Important:</strong> You must complete <em>all</em> 5 decisions before you can proceed.
    {% endif %}
  </p>

  <div class="border border-4 border-primary rounded p-3 bg-light mb-4">
    <label for="check_task2" class="fs-5">
      {% if player.selected_language == 'it' %}
        Domanda di comprensione: Se scegli di ricevere €400 immediatamente, quanto puoi assegnare tra 4 settimane? (Rispondi in numeri, senza simboli)
      {% else %}
        Comprehension check: If you allocate €400 to right now, how much can you allocate in 4 weeks? (Answer with numbers only, no symbols)
      {% endif %}
    </label>
    <input
      type="number"
      class="form-control"
      id="check_task2"
      required
      {% if player.selected_language == 'it' %}
        placeholder="Inserisci l'importo rimanente"
      {% else %}
        placeholder="Enter remaining amount"
      {% endif %}
      style="max-width: 300px; font-size: 1.2rem; padding: 0.75rem; border: 2px solid #0d6efd;"
    >
    <div id="task2-error" class="text-danger mt-2" style="display:none;">
      {% if player.selected_language == 'it' %}
        Risposta errata. Per favore, prova di nuovo.
      {% else %}
        Wrong answer. Please try again.
      {% endif %}
    </div>
  </div>
<p class="fs-5">
    {% if player.selected_language == 'it' %}
      Quando sei pronto, clicca sul pulsante "Avanti" per iniziare il Compito 2.
    {% else %}
      When you are ready to begin, click the "Next" button to proceed to Task 2.
    {% endif %}
  </p>
  <div class="d-flex justify-content-end">
    <button type="submit" class="btn btn-primary btn-lg otree-btn-next">
      {% if player.selected_language == 'it' %} Avanti {% else %} Next {% endif %}
    </button>
  </div>
{% endblock %}

{% block scripts %}
  <script>
    document.querySelector('.otree-btn-next').addEventListener('click', function(e) {
      const answer = document.getElementById('check_task2').value.trim();
      const errorBox = document.getElementById('task2-error');
      if (answer !== '600') {
        e.preventDefault();
        errorBox.style.display = 'block';
        document.getElementById('check_task2').classList.add('is-invalid');
      } else {
        errorBox.style.display = 'none';
        document.getElementById('check_task2').classList.remove('is-invalid');
      }
    });
  </script>
{% endblock %}
